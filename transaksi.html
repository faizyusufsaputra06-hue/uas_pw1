<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Transaksi</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="bg-secondary">
    <!-- Header -->
    <header class="bg-primary text-white p-3">
      <div class="container d-flex align-items-center">
        <img
          src="gambar/spider (2).jpeg"
          width="50"
          height="50"
          class="rounded-circle me-3"
        />
        <h3 class="mb-0">Aplikasi Penjualan Barang</h3>
      </div>
    </header>

    <!-- Navigasi -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#menu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="menu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="login.html">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">Beranda</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="transaksi.html">Transaksi</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="profil.html">Profil</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- form -->
    <div class="container mb-5">
      <h4 class="text-center mb-3">Form Transaksi</h4>

      <form
        class="card p-4 shadow-lg rounded-4 mb-4"
        onsubmit="return validasiForm()"
      >
        <h5 class="text-center mb-4">Input Transaksi</h5>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Nama Barang</label>
            <input type="text" id="nama" class="form-control" readonly />
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Kategori</label>
            <select id="kategori" class="form-select">
              <option value="">-- Pilih --</option>
              <option>Rokok</option>
              <option>Minuman</option>
              <option>Lainnya</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label">Harga</label>
            <input type="number" id="harga" class="form-control" readonly />
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label">Jumlah</label>
            <input type="number" id="jumlah" class="form-control" />
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label">Total</label>
            <input type="number" id="total" class="form-control" readonly />
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Tanggal</label>
          <input type="date" id="tanggal" class="form-control" />
        </div>

        <button class="btn btn-success w-100 fw-bold">Simpan Transaksi</button>
      </form>
    </div>

    <!-- tabel transaksi -->
    <div class="card shadow rounded-4">
      <div class="card-body">
        <h5 class="text-center mb-3">Daftar Transaksi</h5>

        <div class="table-responsive">
          <table
            class="table table-striped table-hover table-bordered align-middle"
          >
            <thead class="table-dark text-center">
              <tr>
                <th>Nama</th>
                <th>Harga</th>
                <th>Jumlah</th>
                <th>Total</th>
                <th>Kategori</th>
                <th>Tanggal</th>
              </tr>
            </thead>
            <tbody id="tabelTransaksi" class="text-center"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- java -->
    <script>
      // ambil parameter URL
      const params = new URLSearchParams(window.location.search);
      const namaBarang = params.get("nama");
      const hargaBarang = params.get("harga");

      if (namaBarang) document.getElementById("nama").value = namaBarang;
      if (hargaBarang) document.getElementById("harga").value = hargaBarang;

      // hitung total otomatis
      document.getElementById("jumlah").addEventListener("input", hitungTotal);

      function hitungTotal() {
        const harga = document.getElementById("harga").value;
        const jumlah = document.getElementById("jumlah").value;
        document.getElementById("total").value = harga * jumlah;
      }

      // simpan ke tabel
      function validasiForm() {
        const nama = document.getElementById("nama").value;
        const harga = document.getElementById("harga").value;
        const jumlah = document.getElementById("jumlah").value;
        const total = document.getElementById("total").value;
        const kategori = document.getElementById("kategori").value;
        const tanggal = document.getElementById("tanggal").value;

        if (nama === "" || jumlah === "" || kategori === "" || tanggal === "") {
          alert("Semua field wajib diisi!");
          return false;
        }

        const tabel = document.getElementById("tabelTransaksi");
        tabel.innerHTML += `
      <tr>
        <td>${nama}</td>
        <td>${harga}</td>
        <td>${jumlah}</td>
        <td>${total}</td>
        <td>${kategori}</td>
        <td>${tanggal}</td>
      </tr>
    `;

        return false; // tidak reload
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
